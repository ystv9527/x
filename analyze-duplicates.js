const fs = require('fs');

// è¯»å–ç°æœ‰æ•°æ®
const data = JSON.parse(fs.readFileSync('data/contents.json', 'utf-8'));
const existingTitles = data.items.map(item => item.title.toLowerCase());

console.log('ğŸ“Š ç”¨æˆ·ç°æœ‰æ¡ˆä¾‹æ€»æ•°:', existingTitles.length);
console.log('');

// Nano Bananaæ¡ˆä¾‹åˆ—è¡¨
const nanoBananaCases = [
    'æ’ç”»å˜æ‰‹åŠ', 'æ ¹æ®åœ°å›¾ç®­å¤´ç”Ÿæˆåœ°é¢è§†è§’å›¾ç‰‡', 'çœŸå®ä¸–ç•Œçš„ARä¿¡æ¯åŒ–', 'åˆ†ç¦»å‡º3Då»ºç­‘/åˆ¶ä½œç­‰è·æ¨¡å‹',
    'ä¸åŒæ—¶ä»£è‡ªå·±çš„ç…§ç‰‡', 'å¤šå‚è€ƒå›¾åƒç”Ÿæˆ', 'è‡ªåŠ¨ä¿®å›¾', 'æ‰‹ç»˜å›¾æ§åˆ¶å¤šè§’è‰²å§¿æ€',
    'è·¨è§†è§’å›¾åƒç”Ÿæˆ', 'å®šåˆ¶äººç‰©è´´çº¸', 'åŠ¨æ¼«è½¬çœŸäººCoser', 'ç”Ÿæˆè§’è‰²è®¾å®š',
    'è‰²å¡çº¿ç¨¿ä¸Šè‰²', 'æ–‡ç« ä¿¡æ¯å›¾', 'æ›´æ¢å¤šç§å‘å‹', 'æ¨¡å‹æ ‡æ³¨è®²è§£å›¾',
    'å®šåˆ¶å¤§ç†çŸ³é›•å¡‘', 'æ ¹æ®é£Ÿæåšèœ', 'æ•°å­¦é¢˜æ¨ç†', 'æ—§ç…§ç‰‡ä¸Šè‰²',
    'OOTDç©¿æ­', 'äººç‰©æ¢è¡£', 'å¤šè§†å›¾ç»“æœç”Ÿæˆ', 'ç”µå½±åˆ†é•œ',
    'äººç‰©å§¿åŠ¿ä¿®æ”¹', 'çº¿ç¨¿å›¾ç”Ÿæˆå›¾åƒ', 'ä¸ºå›¾åƒæ·»åŠ æ°´å°', 'çŸ¥è¯†æ¨ç†ç”Ÿæˆå›¾åƒ',
    'çº¢ç¬”æ‰¹æ³¨', 'çˆ†ç‚¸çš„é£Ÿç‰©', 'åˆ¶ä½œæ¼«ç”»ä¹¦', 'åŠ¨ä½œäººå¶',
    'åœ°å›¾ç”Ÿæˆç­‰è·å»ºç­‘', 'å‚è€ƒå›¾æ§åˆ¶äººç‰©è¡¨æƒ…', 'æ’ç”»ç»˜ç”»è¿‡ç¨‹å››æ ¼', 'è™šæ‹Ÿè¯•å¦†',
    'å¦†é¢åˆ†æ', 'Googleåœ°å›¾è§†è§’ä¸‹çš„ä¸­åœŸä¸–ç•Œ', 'å°åˆ·æ’ç”»ç”Ÿæˆ', 'è¶…å¤šäººç‰©å§¿åŠ¿ç”Ÿæˆ',
    'ç‰©å“åŒ…è£…ç”Ÿæˆ', 'å åŠ æ»¤é•œ/æè´¨', 'æ§åˆ¶äººç‰©è„¸å‹', 'å…‰å½±æ§åˆ¶',
    'ä¹é«˜ç©å…·å°äºº', 'é«˜è¾¾æ¨¡å‹å°äºº', 'ç¡¬ä»¶æ‹†è§£å›¾', 'é£Ÿç‰©å¡è·¯é‡Œæ ‡æ³¨',
    'æå–ä¿¡æ¯å¹¶æ”¾ç½®é€æ˜å›¾å±‚', 'å›¾åƒå¤–æ‰©ä¿®å¤', 'å¤è€åœ°å›¾ç”Ÿæˆå¤ä»£åœºæ™¯', 'æ—¶å°šæœè£…æ‹¼è´´ç”»',
    'ç²¾è‡´å¯çˆ±çš„äº§å“ç…§ç‰‡', 'åŠ¨æ¼«é›•åƒæ”¾å…¥ç°å®', 'ç—›è½¦åˆ¶ä½œ', 'æ¼«ç”»æ„å›¾',
    'æ¼«ç”»é£æ ¼è½¬æ¢', 'ç­‰è·å…¨æ¯æŠ•å½±å›¾', 'Minecrafté£æ ¼åœºæ™¯ç”Ÿæˆ', 'æè´¨çƒèµ‹äºˆæè´¨',
    'å¹³é¢å›¾3Dæ¸²æŸ“', 'é‡ç½®ç›¸æœºå‚æ•°', 'åˆ¶ä½œè¯ä»¶ç…§', 'åœºæ™¯A6æŠ˜å å¡',
    'è®¾è®¡å›½é™…è±¡æ£‹', 'åˆ†å‰²å¯¹ç…§æ ·å¼ç…§ç‰‡', 'ç å®é¦–é¥°è®¾è®¡', 'å‘¨è¾¹è®¾è®¡',
    'æ¨¡å‹å…¨æ¯æŠ•å½±', 'å·¨å‹äººç‰©è„šæ‰‹æ¶', 'é¥æ„Ÿå½±åƒå»ºç­‘ç‰©æå–', 'éƒ¨ä»¶æå–',
    'ç§»é™¤æ±‰å ¡çš„é…æ–™', 'å›¾åƒé«˜æ¸…ä¿®å¤', 'å›¾ç‰‡ç”Ÿæˆå¾®ç¼©åœºæ™¯', 'ç§‘æ™®æ¼«ç”»',
    'è‡ªå®šä¹‰äººç‰©çš„è¡¨æƒ…åŒ…ç”Ÿæˆ', 'æ¢å¤è¢«åƒäº†éƒ¨åˆ†çš„é£Ÿç‰©', 'æ ¼æ–—æ¸¸æˆç•Œé¢åˆ¶ä½œ', 'åˆ‡å‰²æ¨¡å‹',
    'æµ·ç›—é€šç¼‰ä¹¦', 'å‘¨è¾¹å±•ç¤ºè´§æ¶', 'æ¼«å±•å±•å°', 'çº¿ç¨¿è½¬æ¶‚é¸¦ç”»',
    'ç°ä»£ç¾æœ¯å±•è§ˆç©ºé—´', 'æš—é»‘å“¥ç‰¹å¡”ç½—ç‰Œ', 'é»‘ç™½è¿›åŒ–å›¾', 'ç»ç’ƒç“¶çºªå¿µå“',
    'å¾®å‹å•†åº—', 'æˆä¸ºVtuber', 'è½¦ç«™ç”µå½±æµ·æŠ¥', 'ç”µå½±ä¼‘æ¯å®¤',
    'åˆ‡å‰²å¸¦æœ‰å¡é€šçˆ†ç‚¸æ•ˆæœçš„ç‰©ä½“', 'å¡é€šäººç‰©ä¸»é¢˜ç«è½¦', 'è‡ªå®šä¹‰ä¸»é¢˜å…¬å›­', 'åˆ›å»ºæ˜Ÿåº§å›¾',
    'å›¾ç‰‡å˜æ‰‹æœºå£çº¸', 'åˆ¶ä½œç”µå½±æµ·æŠ¥', 'å°†Xè´¦æˆ·å˜æˆè½¯ç›˜', 'å°†å‚è€ƒå›¾åƒå˜ä¸ºé€æ˜ç‰©ä½“',
    'é±¼çœ¼é•œå¤´è§†è§’å›¾åƒ', 'è¶…çº§è‹±é›„å®¤å†…è®¾è®¡', 'è‡ªå®šä¹‰å¨ƒå¨ƒæœº', 'å­—ä½“logoè®¾è®¡',
    'æ¸¸æˆè§’è‰²çŠ¶æ€ç•Œé¢', 'æ–‡å­—è½¬è±¡å½¢å›¾', 'æ•°ä½æ¿ä¸Šçš„ç»˜ç”»', 'åˆ›å»ºLineå°ç« å›¾ç‰‡',
    'å¯¹ç«¥å¹´çš„è‡ªå·±æ²»ç–—', 'PIXARé£æ ¼å›¾ç‰‡'
];

console.log('ğŸ†• Nano Bananaæ¡ˆä¾‹æ€»æ•°:', nanoBananaCases.length);
console.log('');

// æ£€æŸ¥å¯èƒ½é‡å¤çš„æ¡ˆä¾‹
const potentialDuplicates = [];
const uniqueCases = [];

nanoBananaCases.forEach((nanoCase, index) => {
    const lowerCase = nanoCase.toLowerCase();

    // æ£€æŸ¥å®Œå…¨åŒ¹é…
    if (existingTitles.includes(lowerCase)) {
        potentialDuplicates.push({ index: index + 1, title: nanoCase, reason: 'æ ‡é¢˜å®Œå…¨åŒ¹é…' });
        return;
    }

    // æ£€æŸ¥å…³é”®è¯åŒ¹é…
    const keywords = lowerCase.split(/[/\sï¼Œ,]/);
    const hasMatch = existingTitles.some(existingTitle => {
        return keywords.some(kw => kw.length > 2 && existingTitle.includes(kw));
    });

    if (hasMatch) {
        potentialDuplicates.push({ index: index + 1, title: nanoCase, reason: 'å…³é”®è¯ç›¸ä¼¼' });
    } else {
        uniqueCases.push({ index: index + 1, title: nanoCase });
    }
});

console.log('ğŸ”´ å¯èƒ½é‡å¤çš„æ¡ˆä¾‹ (' + potentialDuplicates.length + 'ä¸ª):');
potentialDuplicates.forEach(item => {
    console.log(`  ${item.index}. ${item.title} (${item.reason})`);
});

console.log('');
console.log('âœ… ç‹¬ç‰¹çš„æ–°æ¡ˆä¾‹ (' + uniqueCases.length + 'ä¸ª):');
uniqueCases.slice(0, 20).forEach(item => {
    console.log(`  ${item.index}. ${item.title}`);
});

if (uniqueCases.length > 20) {
    console.log(`  ... è¿˜æœ‰ ${uniqueCases.length - 20} ä¸ª`);
}

console.log('');
console.log('ğŸ“ˆ ç»Ÿè®¡æ‘˜è¦:');
console.log(`  - ç°æœ‰æ¡ˆä¾‹: ${existingTitles.length}ä¸ª`);
console.log(`  - Nano Bananaæ¡ˆä¾‹: ${nanoBananoCases.length}ä¸ª`);
console.log(`  - å¯èƒ½é‡å¤: ${potentialDuplicates.length}ä¸ª`);
console.log(`  - å¯å¯¼å…¥æ–°æ¡ˆä¾‹: ${uniqueCases.length}ä¸ª`);
console.log(`  - å¯¼å…¥åæ€»æ•°: ${existingTitles.length + uniqueCases.length}ä¸ª`);
