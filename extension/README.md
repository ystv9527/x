# 📚 X 推文收藏助手 - 浏览器扩展

一键采集 X (Twitter) 推文到本地收藏库，支持图片下载和中英文自动分离。

## ✨ 功能特性

- 🎯 **一键采集** - 在推文下方直接显示采集按钮
- 🖼️ **自动下载图片** - 通过代理自动下载推文图片
- 🌏 **中英文分离** - 自动识别和分离中英文内容
- 💾 **本地存储** - 所有数据保存在本地，安全可控
- 🎨 **美观界面** - 与 X 界面无缝融合

## 📦 安装步骤

### 步骤 1：生成扩展图标

1. 打开 `extension/generate-icons.html` 文件（双击或用浏览器打开）
2. 点击三个按钮下载图标：
   - 下载 icon16.png
   - 下载 icon48.png
   - 下载 icon128.png
3. 将下载的三个图标文件放到 `extension/icons/` 文件夹中

### 步骤 2：加载扩展到浏览器

#### Chrome / Edge 浏览器：

1. 打开浏览器，进入扩展管理页面：
   - Chrome: `chrome://extensions/`
   - Edge: `edge://extensions/`

2. 开启右上角的 **"开发者模式"**

3. 点击 **"加载已解压的扩展程序"**

4. 选择 `E:\gitpromts\extension` 文件夹

5. 扩展安装成功！你会看到扩展图标出现在工具栏

### 步骤 3：启动本地服务器

确保本地服务器正在运行：

```bash
cd E:\gitpromts
# 运行服务器（带代理）
Start-Server-With-Proxy.bat
```

或者直接运行：
```bash
set HTTP_PROXY=http://127.0.0.1:7897
set HTTPS_PROXY=http://127.0.0.1:7897
node server.js
```

## 🎯 使用方法

### 方法 1：在推文页面直接采集

1. 访问 https://x.com 或 https://twitter.com
2. 浏览推文，你会在每条推文下方看到 **"📚 采集"** 按钮
3. 点击按钮，自动打开编辑页面
4. 检查内容，点击 **"📍 在此处分割"** 按钮分离中英文
5. 点击 **"💾 保存到收藏库"**

### 方法 2：通过扩展图标

1. 点击浏览器工具栏的扩展图标
2. 查看服务器状态
3. 点击 **"打开收藏库"** 查看所有收藏
4. 点击 **"设置"** 手动添加内容

## 📁 文件结构

```
extension/
├── manifest.json          # 扩展配置
├── content.js             # 核心脚本（在X页面注入）
├── styles.css            # 按钮样式
├── popup.html            # 扩展弹出页面
├── popup.js              # 弹出页面脚本
├── generate-icons.html   # 图标生成工具
├── icons/                # 扩展图标
│   ├── icon16.png
│   ├── icon48.png
│   └── icon128.png
└── README.md             # 本文件
```

## 🔧 配置说明

### 修改服务器地址

如果你的服务器不是 `http://localhost:3000`，可以修改以下文件：

1. **content.js** - 第4行：
   ```javascript
   const SERVER_URL = 'http://localhost:3000';
   ```

2. **popup.js** - 第3行：
   ```javascript
   const SERVER_URL = 'http://localhost:3000';
   ```

## ❓ 常见问题

### Q: 采集按钮不显示？
A: 确保扩展已正确加载，刷新X页面后按钮会自动出现。

### Q: 图片下载失败？
A: 检查：
1. 代理是否运行（Clash 端口 7897）
2. 服务器是否用代理启动（`Start-Server-With-Proxy.bat`）

### Q: 服务器状态显示"离线"？
A: 检查服务器是否运行：
```bash
netstat -ano | findstr ":3000"
```

### Q: 如何卸载扩展？
A: 进入扩展管理页面，点击 "移除" 按钮。

## 🆚 对比书签模式

| 特性 | 书签模式 | 扩展模式 |
|------|----------|----------|
| 安装难度 | 简单 | 中等 |
| 使用便捷性 | 需要点击书签栏 | 推文旁直接显示按钮 |
| 视觉效果 | 普通 | 美观、融入界面 |
| 批量采集 | 不支持 | 可扩展支持 |
| 推荐场景 | 快速测试 | 日常使用 |

## 📝 更新日志

### v1.0.0 (2025-11-05)
- ✅ 初始版本发布
- ✅ 支持一键采集推文
- ✅ 自动下载图片
- ✅ 中英文自动分离
- ✅ 美观的弹出界面

## 🎉 下一步

安装完成后，建议：

1. 访问 X.com 测试采集功能
2. 采集几条推文试试
3. 查看 http://localhost:3000 确认数据已保存
4. 探索更多功能！

有问题随时反馈！😊
